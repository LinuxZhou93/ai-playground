<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta http-equiv="cache-control" content="no-cache">
<meta charset="utf-8">

<head>
	<title>Scratch Jr</title>
	<link href="css/base.css" rel="stylesheet">
	<link href="css/lobby.css" rel="stylesheet">

	<script>
		window.scratchJrPage = 'home';

		// POLYFILL: Mouse Events -> Touch Events for Desktop Support
		(function () {
			if ('ontouchstart' in window) return; // Touch device, do nothing

			// Mock Touch if missing (Desktop Chrome/Safari/Firefox)
			if (typeof window.Touch === 'undefined') {
				window.Touch = function (t) {
					this.identifier = t.identifier;
					this.target = t.target;
					this.clientX = t.clientX;
					this.clientY = t.clientY;
					this.screenX = t.screenX;
					this.screenY = t.screenY;
					this.pageX = t.pageX;
					this.pageY = t.pageY;
				};
			}

			// Mock TouchList if missing
			if (typeof window.TouchList === 'undefined') {
				window.TouchList = function (touches) {
					this.length = touches.length;
					for (let i = 0; i < this.length; i++) {
						this[i] = touches[i];
					}
					this.item = function (index) { return this[index]; };
				};
			}

			// Mock TouchEvent if missing
			if (typeof window.TouchEvent === 'undefined') {
				window.TouchEvent = function (type, params) {
					params = params || {};
					const evt = document.createEvent('CustomEvent');
					evt.initCustomEvent(type, params.bubbles, params.cancelable, null);
					evt.touches = new TouchList(params.touches || []);
					evt.targetTouches = new TouchList(params.targetTouches || []);
					evt.changedTouches = new TouchList(params.changedTouches || []);
					evt.view = params.view || window;
					return evt;
				};
			}

			function dispatch(type, e) {
				if (e.button !== 0) return; // Only left click

				const touch = new Touch({
					identifier: Date.now(),
					target: e.target,
					clientX: e.clientX,
					clientY: e.clientY,
					screenX: e.screenX,
					screenY: e.screenY,
					pageX: e.pageX,
					pageY: e.pageY
				});

				const event = new TouchEvent(type, {
					cancelable: true,
					bubbles: true,
					touches: (type === 'touchend') ? [] : [touch],
					targetTouches: (type === 'touchend') ? [] : [touch],
					changedTouches: [touch],
					view: window
				});

				e.target.dispatchEvent(event);
			}

			let isDown = false;
			document.addEventListener('mousedown', (e) => { isDown = true; dispatch('touchstart', e); }, true);
			document.addEventListener('mousemove', (e) => {
				if (isDown) {
					e.preventDefault();
					dispatch('touchmove', e);
				}
			}, true);
			document.addEventListener('mouseup', (e) => {
				if (isDown) {
					isDown = false;
					dispatch('touchend', e);
				}
			}, true);
		})();
	</script>
	<script type="text/javascript" src="app.bundle.js"></script>

</head>

<body>
	<div class="frame" id="frame">
		<div class="topbar" id="topbar">
			<ul class="topbar-nav" id="nav">
				<li class="logo" id="logotab">
					<span class="logo-icon"></span>
				</li>
				<div></div>
				<li class="home" id="hometab">
					<span class="home-icon"></span>
				</li>
				<div></div>
				<li class="help" id="helptab">
					<span class="help-icon"></span>
				</li>
				<div></div>
			</ul>
			<ul class="reference" id="settings">
				<div></div>
				<li class="gear" id="geartab">
					<span class="gear-icon"></span>
				</li>
			</ul>
			<ul class="reference" id="reference">
				<div></div>
				<li class="book" id="booktab">
					<span class="book-icon"></span>
				</li>
			</ul>
		</div>
		<div class="topsection" id="topsection">
			<div class="tabtitle" id="tabtitle">
				<span id="tabheader"></span>
			</div>
			<div class="tabicon" id="tabicon"></div>
			<div class="blueband" id="blueband">
				<span id="subtitle"></span>
			</div>
		</div>
		<div class="contentwrap" id="wrapc"></div>
		<div class="footer off" id="footer">
			<ul class="footer-nav" id="footernav">
				<li class="tab" id="abouttab">
					<div class="about-icon"></div>
					<span id="abouttab-text"></span>
				</li>
				<li class="tab" id="interfacetab">
					<div class="interface-icon"></div>
					<span id="interfacetab-text"></span>
				</li>
				<li class="tab" id="painttab">
					<div class="paint-icon"></div>
					<span id="painttab-text"></span>
				</li>
				<li class="tab2" id="blockstab">
					<div class="blocks-icon"></div>
					<span id="blockstab-text"></span>
				</li>
				<div></div>
			</ul>
		</div>

	</div>
</body>

</html>