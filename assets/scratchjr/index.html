<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1.0,
      maximum-scale=1.0, user-scalable=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta http-equiv="cache-control" content="no-cache">
<meta charset="utf-8">

<html>

<head>
    <title>ScratchJr Intro</title>
    <link href="css/base.css" rel="stylesheet">
    <link href="css/start.css" rel="stylesheet">
    <script>
        window.scratchJrPage = 'index';

        // POLYFILL: Mouse Events -> Touch Events for Desktop Support
        // POLYFILL: Mouse Events -> Touch Events for Desktop Support
        (function () {
            if ('ontouchstart' in window) return; // Touch device, do nothing

            // Mock Touch if missing (Desktop Chrome/Safari/Firefox)
            if (typeof window.Touch === 'undefined') {
                window.Touch = function (t) {
                    this.identifier = t.identifier;
                    this.target = t.target;
                    this.clientX = t.clientX;
                    this.clientY = t.clientY;
                    this.screenX = t.screenX;
                    this.screenY = t.screenY;
                    this.pageX = t.pageX;
                    this.pageY = t.pageY;
                };
            }

            // Mock TouchList if missing
            if (typeof window.TouchList === 'undefined') {
                window.TouchList = function (touches) {
                    this.length = touches.length;
                    for (let i = 0; i < this.length; i++) {
                        this[i] = touches[i];
                    }
                    this.item = function (index) { return this[index]; };
                };
            }

            // Mock TouchEvent if missing
            if (typeof window.TouchEvent === 'undefined') {
                window.TouchEvent = function (type, params) {
                    params = params || {};
                    const evt = document.createEvent('CustomEvent');
                    evt.initCustomEvent(type, params.bubbles, params.cancelable, null);
                    evt.touches = new TouchList(params.touches || []);
                    evt.targetTouches = new TouchList(params.targetTouches || []);
                    evt.changedTouches = new TouchList(params.changedTouches || []);
                    evt.view = params.view || window;
                    return evt;
                };
            }

            function dispatch(type, e) {
                if (e.button !== 0) return; // Only left click

                const touch = new Touch({
                    identifier: Date.now(),
                    target: e.target,
                    clientX: e.clientX,
                    clientY: e.clientY,
                    screenX: e.screenX,
                    screenY: e.screenY,
                    pageX: e.pageX,
                    pageY: e.pageY
                });

                const event = new TouchEvent(type, {
                    cancelable: true,
                    bubbles: true,
                    touches: (type === 'touchend') ? [] : [touch],
                    targetTouches: (type === 'touchend') ? [] : [touch],
                    changedTouches: [touch],
                    view: window
                });

                e.target.dispatchEvent(event);
            }

            let isDown = false;
            document.addEventListener('mousedown', (e) => { isDown = true; dispatch('touchstart', e); }, true);
            document.addEventListener('mousemove', (e) => {
                if (isDown) {
                    // Prevent default drag selection behavior
                    e.preventDefault();
                    dispatch('touchmove', e);
                }
            }, true);
            document.addEventListener('mouseup', (e) => {
                if (isDown) {
                    isDown = false;
                    dispatch('touchend', e);
                    // Optional: click might be needed by some apps, but ScratchJr usually ignores it.
                }
            }, true);
        })();
    </script>
    <script type="text/javascript" src="app.bundle.js"></script>
</head>

<body style="margin:0px; background: black;">
    <div class="frame" id="frame">
        <div class="topbar" id="topbar">
            <div class="topbar-button" id="topbar-info"></div>
            <div class="topbar-button" id="topbar-settings"></div>
            <div class="topbar-button" id="topbar-moreapps">

            </div>
        </div>
        <div class="gear hide" id="gear"></div>
        <div class="credits hide" id="authors"></div>
        <div class="creditsText hide" id="authorsText"></div>
        <div class="rays" id="rays"></div>
        <div class="catface" id="catface"></div>
        <div class="jrlogo" id="jrlogo"></div>
        <div class="purple hide" id="purpleguy"></div>
        <div class="red hide" id="redguy"></div>
        <div class="blue hide" id="blueguy"></div>

        <div class="startButton hide" id="startButton"></div>
        <div class="pbschars hide" id="pbschars"></div>

        <div class="gettings hide" id="gettings"></div>
        <div class="startcode hide" id="startcode"></div>

        <div class="usageQuestion hide" id="usageQuestion"></div>
        <div class="usageSchool hide" id="usageSchool">
            <img class="usageIcon" id="useSchoolIcon" src="assets/start/schoolIcon.svg" />
            <div class="usageText" id="useSchoolText"></div>
        </div>
        <div class="usageHome hide" id="usageHome">
            <img class="usageIcon" id="useHomeIcon" src="assets/start/homeIcon.svg" />
            <div class="usageText" id="useHomeText"></div>
        </div>
        <div class="usageOther hide" id="usageOther">
            <img class="usageIcon" id="useOtherIcon" src="assets/start/otherIcon.svg" />
            <div class="usageText" id="useOtherText"></div>
        </div>
        <div class="usageNoanswer hide" id="usageNoanswer">
            <div class="usageNoanswerText" id="usageNoanswerText"></div>
        </div>

        <div class="optionsInstruction hide" id="optionsInstruction">
        </div>
        <div class="optionsList hide" id="optionsList">
        </div>
    </div>
</body>

</html>